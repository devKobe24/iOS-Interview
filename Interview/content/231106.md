# iOS 면접 질문 및 답변 시리즈 (4) 🤔

---

## Q. 순환참조에 대하여 설명해주시겠습니까?

네, 순환참조(Circular reference 또는 retain cycle)는 두 객체 또는 더 많은 객체들이 서로를 강하게 참조하고 있어서 참조 카운트가 절대로 0이 되지 않아 메모리에서 해제 되지 않는 상태를 말합니다.

iOS에서는 메모리 관리를 위해 ARC(Automatic Reference Counting)을 사용합니다.

ARC는 객체에 대한 참조 횟수를 자동으로 계산하여 참조 횟수가 0이 되면 메모리에서 해당 객체를 해제합니다.

그러나 객체들이 서로 강하게 참조하고 있을 경우에는 자동으로 메모리 해제가 일어나지 않습니다.

## Q2. 순환참조를 방지하는 방법에는 무엇이 있을까요?

네, 약한 참조를 사용하거나 미소유 참조를 사용할 수 있습니다 그리고 클로저에서 약한 참조와 미소유 참조를 사용하여 순환 참조를 방지할 수 있습니다.

먼저, 객체 간의 관계가 '소유'가 아닌 '사용'에 가깝다면 약한 참조를 사용할 수 있습니다.

약한 참조는 참조 카운트를 증가시키지 않기 때문에 ARC가 참조된 객체를 메모리에서 해제할 수 있게합니다.

두 번째로 미소류 참조는 객체의 생명주기가 다른 객체와 동일하다고 확신할 때 사용합니다.

미소유 참조는 참조하고 있는 객체가 해제된 후에도 `nil`로 바뀌지 않습니다.

따라서 미소유 참조를 사용할 때는 참조된 객체가 항상 존재한다는 것을 확실히 해야하며, 그렇지 않으면 런타임 에러가 발생할 수 있습니다.

마지막으로 클로저에서 약한 참조와 미소유 참조를 사용할 수 있습니다.

클로저 내부에서 `self`를 참조할 때 순환 참조가 발생할 수 있습니다.

이를 방지하기 위해 클로저의 캡처 리스트에 `[weak self]`또는 `[unowned self]`를 사용합니다.

`weak self`를 사용하면 `self`가 `nil`이 될 수 있으므로 클로저 내에서 옵셔널 체이닝 `guard let strongSelf = self else { return }`을 통해 `self`를 사용해야 합니다.

`unowned self`는 `self`가 항상 존재할 것이라는 가정하에 사용합니다.

## Q3. 그렇다면 ARC는 무엇인가요?

네, ARC(Automatic Reference Counting)은 Objective-C와 Swift 프로그래밍 언어에서 사용되는 메모리 관리 기법입니다.

ARC는 겍체가 더 이상 필요하지 않을 때 메모리에서 자동으로 해제되도록 참조 카운트를 사용합니다.

즉, 어떤 객체에 대한 강한 참조(strong reference)가 생성될 때마다 해당 객체의 참조 카운트가 증가하고, 강한 참조가 해제될 때마다 참조 카운트가 감소합니다.

참조 카운트가 0이되면 ARC는 객체 메모리에서 해제될 수 있다고 판단하고 해제 작업을 수행합니다.
